{{ define "main" }}
{{ $deity := where .Site.Data.divinites "slug" .Params.deity_slug | first }}

<article class="deity-page">
    <!-- Deity Header with custom styling -->
    <header class="deity-header" style="background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('{{ $deity.image }}');">
        <div class="deity-header-content">
            <h1 class="deity-title">{{ $deity.name }}</h1>
            <p class="deity-subtitle">{{ $deity.title }}</p>
            <div class="deity-script">{{ $deity.domain }}</div>
            
            <div class="deity-symbols">
                {{ range $deity.symbols }}
                <div class="deity-symbol">
                    <i class="{{ .icon }}"></i>
                </div>
                {{ end }}
            </div>
        </div>
    </header>

    <!-- Custom CSS for this deity -->
    {{ if $deity.colors }}
    <style>
        .deity-page {
            --deity-primary: {{ $deity.colors.primary }};
            --deity-secondary: {{ $deity.colors.secondary }};
            --deity-accent: {{ $deity.colors.accent }};
            --deity-text: {{ $deity.colors.text }};
            --deity-light: {{ $deity.colors.light };
        }
        
        body {
            background-color: var(--deity-primary);
            color: var(--deity-text);
        }
        
        .section-title {
            color: var(--deity-accent);
            border-bottom: 1px solid var(--deity-accent);
        }
    </style>
    {{ end }}

    <!-- Main Content -->
    <div class="main-content">
        <section class="deity-description">
            <div class="container">
                <h2 class="section-title">Description</h2>
                <p>{{ $deity.description }}</p>
                
                {{ .Content }}
            </div>
        </section>

        <!-- Continent Section -->
        {{ if $deity.continent }}
        <section class="continent-section">
            <div class="continent-container">
                <h2 class="section-title">Le Continent</h2>
                <p>Explorez le continent de {{ $deity.name }}...</p>
            </div>
        </section>
        {{ end }}

        <!-- Related Chronicles -->
        {{ $relatedChronicles := where .Site.Pages ".Params.deity" $deity.slug }}
        {{ if $relatedChronicles }}
        <section class="related-chronicles">
            <div class="container">
                <h2 class="section-title">Chroniques Associ√©es</h2>
                <div class="chronicles-grid">
                    {{ range $relatedChronicles }}
                    <div class="chronicle-card">
                        <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                        <p>{{ .Summary }}</p>
                    </div>
                    {{ end }}
                </div>
            </div>
        </section>
        {{ end }}
    </div>
</article>
{{ end }}